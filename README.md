# ور ور سایت (Ver Ver Site)

"ور ور سایت" یک پلتفرم انجمن آنلاین است که با هدف ایجاد فضایی برای گفتگو و تبادل نظر طراحی شده است. این پروژه با الهام از سادگی و کارایی پلتفرم‌هایی مانند یوتیوب و با تمرکز بر ویژگی‌های تعاملی مشابه Reddit و نی‌نی‌سایت توسعه داده می‌شود.

## ساختار پروژه

این پروژه به صورت یک مونوریپو (monorepo) سازماندهی شده و شامل دو بخش اصلی است:

*   `backend/`: اپلیکیشن سمت سرور که با Node.js و Express.js توسعه داده شده و مسئولیت مدیریت منطق کسب‌وکار، APIها و ارتباط با دیتابیس PostgreSQL را بر عهده دارد.
*   `frontend/`: اپلیکیشن سمت کاربر که با Next.js (React) توسعه داده شده و رابط کاربری وب‌سایت را فراهم می‌کند.

## پیش‌نیازهای سیستم

قبل از شروع، مطمئن شوید که نرم‌افزارهای زیر روی سیستم شما نصب شده باشند:

*   **Node.js:** نسخه 18.x (LTS) یا بالاتر پیشنهاد می‌شود. می‌توانید از [وب‌سایت رسمی Node.js](https://nodejs.org/) آن را دانلود و نصب کنید.
*   **PostgreSQL:** یک سیستم مدیریت دیتابیس رابطه‌ای. برای نصب و راه‌اندازی به [مستندات PostgreSQL](https://www.postgresql.org/docs/) مراجعه کنید. پس از نصب، باید یک دیتابیس و یک کاربر برای این پروژه ایجاد کنید.
*   **Git:** برای کلون کردن ریپازیتوری پروژه.

## راه‌اندازی Backend

1.  **رفتن به پوشه backend:**
    ```bash
    cd backend
    ```

2.  **نصب وابستگی‌ها:**
    ```bash
    npm install
    ```

3.  **ایجاد و تنظیم فایل `.env`:**
    یک فایل به نام `.env` در ریشه پوشه `backend/` ایجاد کرده و متغیرهای محیطی زیر را با مقادیر مناسب خود پر کنید:

    ```env
    # PostgreSQL Database Configuration
    DB_HOST=localhost
    DB_PORT=5432
    DB_USER=your_db_user         # نام کاربری دیتابیس شما
    DB_PASSWORD=your_db_password   # رمز عبور دیتابیس شما
    DB_NAME=verversite_db        # نام دیتابیسی که ایجاد کرده‌اید

    # Google OAuth Credentials
    GOOGLE_CLIENT_ID=your_google_client_id.apps.googleusercontent.com
    GOOGLE_CLIENT_SECRET=your_google_client_secret

    # Application URLs
    API_BASE_URL=http://localhost:3000  # آدرس پایه سرور بک‌اند شما
    APP_BASE_URL=http://localhost:3001  # آدرس پایه سرور فرانت‌اند شما (برای ریدایرکت‌های OAuth)

    # Security
    JWT_SECRET=your_strong_jwt_secret_key          # یک کلید امن و طولانی برای امضای توکن‌ها
    SESSION_SECRET=your_strong_session_secret_key  # یک کلید امن برای نشست‌ها
    ```
    *   **نکته مهم:** مقادیر `GOOGLE_CLIENT_ID` و `GOOGLE_CLIENT_SECRET` را باید از Google Cloud Console برای پروژه خود دریافت کنید. `API_BASE_URL` باید با پورتی که بک‌اند روی آن اجرا می‌شود (معمولاً 3000) و `APP_BASE_URL` با پورتی که فرانت‌اند روی آن اجرا می‌شود (معمولاً 3001) مطابقت داشته باشد.

4.  **اجرای Migrationهای دیتابیس:**
    این دستور جداول لازم را در دیتابیس شما ایجاد می‌کند.
    ```bash
    npx knex migrate:latest
    ```

5.  **اجرای سرور Backend:**
    ```bash
    npm start
    ```
    سرور بک‌اند به طور پیش‌فرض روی پورت 3000 (یا پورتی که در `process.env.PORT` تنظیم کرده‌اید) شروع به کار خواهد کرد.
    (برای توسعه، می‌توانید از `nodemon server.js` استفاده کنید اگر `nodemon` را نصب کرده‌اید).

## راه‌اندازی Frontend

1.  **رفتن به پوشه frontend:**
    (از ریشه پروژه)
    ```bash
    cd frontend
    ```

2.  **نصب وابستگی‌ها:**
    ```bash
    npm install
    ```

3.  **ایجاد و تنظیم فایل `.env.local`:**
    یک فایل به نام `.env.local` در ریشه پوشه `frontend/` ایجاد کرده و متغیر محیطی زیر را تنظیم کنید:

    ```env
    NEXT_PUBLIC_API_BASE_URL=http://localhost:3000/api
    ```
    *   **نکته مهم:** این آدرس باید به مسیر پایه APIهای بک‌اند شما اشاره کند. اگر بک‌اند شما روی پورت دیگری یا دامنه دیگری اجرا می‌شود، این مقدار را متناسب با آن تغییر دهید.

4.  **اجرای سرور Frontend:**
    ```bash
    npm run dev
    ```
    سرور توسعه فرانت‌اند معمولاً روی پورت 3001 شروع به کار خواهد کرد.

## تست قابلیت‌های اولیه

پس از راه‌اندازی موفقیت‌آمیز هر دو سرور بک‌اند و فرانت‌اند:

1.  مرورگر خود را باز کرده و به آدرس فرانت‌اند (معمولاً `http://localhost:3001`) بروید.
    *   باید لیستی از تاپیک‌ها (اگر از قبل تاپیکی در دیتابیس وجود داشته باشد یا توسط فید اولیه ایجاد شود) را در صفحه اصلی مشاهده کنید.
    *   بارگذاری بی‌نهایت (Infinite scroll) باید با اسکرول به پایین صفحه، تاپیک‌های بیشتری را (در صورت وجود) بارگذاری کند.
2.  روی دکمه **"Login"** در نوبار کلیک کنید.
3.  با استفاده از حساب کاربری گوگل خود وارد شوید. شما باید به صفحه گوگل هدایت شده و پس از ورود موفق، به برنامه بازگردید.
4.  پس از ورود موفق، باید نام کاربری و آواتار خود را در نوبار مشاهده کنید و دکمه "Login" به "Logout" و "New Topic" تغییر کرده باشد.
5.  **روی نام کاربری نویسنده یک تاپیک (در صفحه اصلی یا صفحه تاپیک) کلیک کنید تا به صفحه پروفایل او بروید.**
    *   ***در صفحه پروفایل، باید اطلاعات کاربر، لیست تاپیک‌های او، و تعداد دنبال‌کنندگان/دنبال‌شوندگان را مشاهده کنید.***
    *   ***اگر پروفایل متعلق به کاربر دیگری است، باید بتوانید او را دنبال (Follow) یا آنفالو (Unfollow) کنید و تغییرات در تعداد دنبال‌کنندگان و ظاهر دکمه را مشاهده نمایید.***
6.  **از صفحه اصلی، روی عنوان یک تاپیک کلیک کنید تا به صفحه آن تاپیک بروید.**
    *   در صفحه تاپیک، باید جزئیات کامل تاپیک (عنوان، متن، نویسنده، تاریخ) را مشاهده کنید.
    *   باید بتوانید تاپیک را لایک کنید ***و تغییر در تعداد لایک‌ها و ظاهر دکمه را ببینید.***
    *   باید بتوانید برای تاپیک کامنت ارسال کنید. ***کامنت‌های تودرتو باید با تورفتگی مناسب نمایش داده شوند.***
    *   ***باید بتوانید کامنت‌ها را لایک یا حذف کنید (اگر مالک کامنت یا ادمین باشید) و تغییرات را مشاهده نمایید.***
    *   اگر مالک تاپیک یا ادمین باشید، باید بتوانید خود تاپیک را نیز حذف کنید.
7.  روی دکمه **"New Topic"** کلیک کنید.
8.  فرم ایجاد تاپیک ظاهر می‌شود. فیلدهای **"Title"** و **"Body"** را پر کنید. (سایر فیلدها مانند دسته‌بندی و URL تصویر در این مرحله اختیاری هستند).
9.  روی دکمه **"Create Topic"** کلیک کنید.
10. اگر همه چیز به درستی کار کند، باید به صفحه تاپیک جدید هدایت شوید.

این مستندات اولیه به شما کمک می‌کند تا بخش‌های اصلی پروژه را راه‌اندازی و تست کنید. با پیشرفت پروژه، این فایل `README.md` نیز تکمیل‌تر خواهد شد.
