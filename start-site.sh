#!/bin/sh

# در صورت بروز خطا در هر دستور، فوراً خارج شو.
set -e

echo "در حال راه اندازی سرویس های VerVerSite (بکند، فرانت اند، پایگاه داده)..."
echo "در حال ساخت ایمیج ها در صورتی که وجود نداشته باشند یا Dockerfile ها تغییر کرده باشند..."

# راه اندازی سرویس ها در حالت جدا شده (detached)، در صورت نیاز ایمیج ها ساخته می شوند
docker-compose up --build -d

echo ""
echo "سرویس ها در پس زمینه در حال راه اندازی هستند."
echo "می توانید لاگ ها را با استفاده از دستور زیر مشاهده کنید: docker-compose logs -f"
echo ""
echo "پس از راه اندازی سرویس ها:"
echo " - فرانت اند در آدرس http://localhost:3000 در دسترس خواهد بود"
echo " - ای پی آی بکند (در صورت نیاز مستقیم) در آدرس http://localhost:3001 در دسترس خواهد بود"
echo ""
echo "برای متوقف کردن تمام سرویس ها، دستور زیر را اجرا کنید: docker-compose down"
echo "برای متوقف کردن و حذف والیوم ها (مثلاً داده های پایگاه داده)، دستور زیر را اجرا کنید: docker-compose down -v"
